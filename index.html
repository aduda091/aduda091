<!DOCTYPE html>
<html lang='hr'>

<head>
	<link rel="stylesheet" type="text/css" href="style.css" />
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Alen Duda - poƒçetna stranica</title>

</head>

<body>

	<main>

		<h1>Alen Duda</h1>

		<ul id="linkList">
			<li>
				<a href="https://www.linkedin.com/in/alen-duda-3624b965/" title="LinkedIn">
					<img src="img/linkedin.png" alt="LinkedIn" width="20%" />
				</a>
			</li>
			<li>
				<a href="https://github.com/aduda091/" title="GitHub">
					<img src="img/github.png" alt="GitHub" width="20%" />
				</a>
			</li>
		</ul>

		<div id="imgContainer">
			<img src="img/wordcloud.png" alt="Skill wordcloud" width="100%" />
		</div>

		<h3>GitHub repositories:</h3>
		<div id="repoList">

		</div>

	</main>


	<script type="text/javascript">

		window.addEventListener("load", getRepositories);

		function getRepositories() {
			let repoList = document.getElementById("repoList");
			let output = "";
			fetch("https://api.github.com/users/aduda091/repos?sort=pushed").then(res => res.json()).then(repos => {

				for (let repo of repos) {
					let langUrl = repo.languages_url;
					fetch(langUrl).then(langs => langs.json()).then(languages => {
						let langArr = Array.from(Object.keys(languages));
						let langString = langArr.join(", ");
						let item = `
					<div class="repo">	
							<h4 class="repoName"><a href="${repo.html_url}"> ${repo.name}</a></h4>
						<div>
							<p class="repoDescription"> ${repo.description ? repo.description : ''}  </p>
							<p class="repoLanguages">(${langString})</p>
						</div>
				</div>
			`;
						output += item;
					}).finally(() => {
						repoList.innerHTML = output;
					})

				}

			});
		}
	</script>

</body>

</html>